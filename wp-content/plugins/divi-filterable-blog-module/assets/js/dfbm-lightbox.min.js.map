{"version":3,"sources":["dfbm-lightbox.js"],"names":["$","w","dfbmLightbox","$opt","this","init","extend","prototype","vars","events","load","opt","header","content","more","close","addAfter","selector","width","data","top","lightbox","structure","imgData","slide","join","$hidden","video","image","href","title","$item","src","addSlide","$direction","$this","cont","css","outerHeight","children","addClass","setTimeout","remove","append","images","show","find","removeClass","scrollTop","sessionStorage","setItem","insertAfter","videoRatio","animate","$way","lbPop","lbHold","removeItem","ratio","outerWidth","height","maxH","maxW","attr","closest","holder","wp","mediaelement","elem","mediaelementplayer","position","way","num","len","Object","keys","length","document","on","e","preventDefault","off","detach","index","dfbmLbInit","url","dfbmPhp","nonce","cdn","dfbmPhpLB","parent","blog","grid","hasClass","$obj","item","lBox","getdirChildImg","$sel","$that","obj","each","i","img","active","prop","replace","getImages","$i","divs","iterator","feat","full","Math","max","apply","$j","art","eq","link","getGallery","$article","slides","text","trim","getVideo","overlay","element","is","clone","removeAttr","ajax","action","vidLink","type","dataType","success","error","location","reload","stopPropagation","jQuery","window"],"mappings":"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","file":"dfbm-lightbox.min.js","sourcesContent":["(function($,w){\n\t$(function(){\n\t\"use strict\";\n\n\t\tvar dfbmLightbox = function( $opt )\n\t\t{\n\n\t\t\tthis.init( $opt );\n\n\t\t};\n\n\t\t$.extend( dfbmLightbox.prototype,\n\t\t{\n\n\t\t\tinit : function( $opt )\n\t\t\t{\n\n\t\t\t\tthis.vars( $opt );\n\n\t\t\t\tthis.events();\n\n\t\t\t\tthis.load();\n\n\t\t\t}, // end init\n\n\t\t\tvars : function( $opt )\n\t\t\t{\n\n\t\t\t\tthis.opt = $.extend(\n\t\t\t\t{\n\n\t\t\t\t\theader   : '',\n\t\t\t\t\tcontent  : '',\n\t\t\t\t\tmore     : '',\n\t\t\t\t\tclose    : 'Close',\n\t\t\t\t\taddAfter : 'body',\n\t\t\t\t\tselector : '',\n\t\t\t\t\twidth    : '80%',\n\t\t\t\t\tdata     : {},\n\n\t\t\t\t}, $opt );\n\n\t\t\t\tthis.top;\n\n\t\t\t\tthis.lightbox = this.structure();\n\n\t\t\t\tthis.imgData  = this.opt.data;\n\n\t\t\t\tthis.addAfter = $( this.opt.addAfter );\n\n\t\t\t\tthis.selector = this.opt.selector ? ', ' + this.opt.selector : '';\n\n\t\t\t}, // end vars\n\n\t\t\tstructure : function()\n\t\t\t{\n\n\t\t\t\treturn $(\n\t\t\t\t[\n\n\t\t\t\t\t'<div id=\"dfbm-lightbox\">',\n\t\t\t\t\t\t'<div id=\"dfbm-lb-pop\" class=\"dfbm-lb-pop dfbm-closed\"></div>',\n\t\t\t\t\t\t'<div id=\"dfbm-lb-wrap\" class=\"dfbm-lb-wrap\">',\n\t\t\t\t\t\t\t'<div class=\"dfbm-lb-container\">',\n\t\t\t\t\t\t\t\t'<div class=\"dfbm-lb-slider\" style=\"width:' + this.opt.width + ';\">',\n\t\t\t\t\t\t\t\t\t'<div id=\"dfbm-lb-holder\" class=\"dfbm-lb-holder dfbm-closed\">',\n\t\t\t\t\t\t\t\t\t\t'<div id=\"dfbm-lb-outer\" class=\"dfbm-lb-outer\">',\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"dfbm-lb-header-section\">',\n\t\t\t\t\t\t\t\t\t\t\t\t( this.opt.header ? '<h3 class=\"dfbm-lb-header\">' + this.opt.header + '</h3>' : '' ),\n\t\t\t\t\t\t\t\t\t\t\t\t'<a href=\"#\" id=\"dfbm-lb-close\" class=\"dfbm-lb-close\">' + this.opt.close + '</a>',\n\t\t\t\t\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t\t\t\t\t\tthis.slide( this.opt.content ),\n\t\t\t\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</div>'\n\n\t\t\t\t].join( '\\n' ) );\n\n\t\t\t}, // end structure\n\n\t\t\tslide : function( $opt, $hidden )\n\t\t\t{\n\n\t\t\t\tvar slide   = [],\n\t\t\t\t\t$hidden = $hidden || false,\n\t\t\t\t\tcontent = ( null != $opt.video ) ? $opt.video\n\t\t\t\t\t\t\t  : this.image( $opt )\n\t\t\t\t\t\t\t\t+ '<div class=\"dfbm-lb-switch prev\" data-direction=\"prev\"><span></span></div>'\n\t\t\t\t\t\t\t\t+ '<div class=\"dfbm-lb-switch next\" data-direction=\"next\"><span></span></div>';\n\n\t\t\t\treturn slide =\n\t\t\t\t[\n\n\t\t\t\t\t'<div class=\"dfbm-lb-content-section' + ( $hidden ? ' hidden' : '' ) + '\">',\n\t\t\t\t\t\t'<div class=\"dfbm-lb-content\">',\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t'<div class=\"dfbm-lb-footer-section\">',\n\t\t\t\t\t\t\t'<a class=\"dfbm-lb-link\" href=\"' + $opt.href + '\">',\n\t\t\t\t\t\t\t\t'<div class=\"dfbm-lb-title\">' + $opt.title + '</div>',\n\t\t\t\t\t\t\t'</a>',\n\t\t\t\t\t\t\t'<a class=\"dfbm-lb-read-more\" href=\"' + $opt.href + '\">',\n\t\t\t\t\t\t\t\t'<div class=\"dfbm-lb-title\">' + this.opt.more + '</div>',\n\t\t\t\t\t\t\t'</a>',\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t'</div>',\n\n\t\t\t\t].join( '\\n' );\n\n\t\t\t}, // end slide\n\n\t\t\timage : function( $item )\n\t\t\t{\n\n\t\t\t\treturn '<img src=\"' + $item.src + '\" alt=\"' + $item.title + '\">';\n\n\t\t\t}, // end image\n\n\t\t\taddSlide : function( $direction )\n\t\t\t{\n\n\t\t\t\tvar $this = this,\n\t\t\t\t\tcont  = $( '#dfbm-lb-outer' );\n\n\t\t\t\tcont.css( 'minHeight', cont.outerHeight() ).children( 'div' ).addClass( 'hidden' );\n\n\t\t\t\tsetTimeout(function()\n\t\t\t\t{\n\n\t\t\t\t\tcont.children( 'div.dfbm-lb-content-section' ).remove();\n\n\t\t\t\t\tcont.append( $this.slide( $this.imgData.images[$this.imgData.show], true ) );\n\n\t\t\t\t\tcont.find( 'img' ).load( function()\n\t\t\t\t\t{\n\n\t\t\t\t\t\tcont.css( 'minHeight', '100%' ).children( 'div' ).removeClass( 'hidden' );\n\n\t\t\t\t\t});\n\n\t\t\t\t}, 200 );\n\n\t\t\t}, // end addSlide\n\n\t\t\tload : function()\n\t\t\t{\n\n\t\t\t\tthis.top = $( w ).scrollTop();\n\n\t\t\t\tw.sessionStorage.setItem( 'dfbmScrollPos', this.top );\n\n\t\t\t\tthis.lightbox.insertAfter( this.addAfter.addClass( 'lightbox' ).css( 'top', - this.top ) );\n\n\t\t\t\tif ( null != this.opt.content.video ) this.videoRatio();\n\n\t\t\t\tthis.animate( 'in' );\n\n\t\t\t}, // end load\n\n\t\t\tanimate : function( $way )\n\t\t\t{\n\n\t\t\t\tvar lbPop  = $( '#dfbm-lb-pop' ),\n\t\t\t\t\tlbHold = $( '#dfbm-lb-holder' );\n\n\t\t\t\tswitch ( $way )\n\t\t\t\t{\n\n\t\t\t\t\tcase 'in' :\n\n\t\t\t\t\t\tsetTimeout( function(){ lbPop.addClass( 'dfbm-opened' ).removeClass( 'dfbm-closed' ); }, 0 );\n\t\t\t\t\t\tsetTimeout( function(){ lbHold.addClass( 'dfbm-opened' ).removeClass( 'dfbm-closed' ); }, 300 );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'out' :\n\n\t\t\t\t\t\tlbHold.addClass( 'dfbm-closed' ).removeClass( 'dfbm-opened' );\n\t\t\t\t\t\tsetTimeout( function()\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tlbPop.addClass( 'dfbm-closed' ).removeClass( 'dfbm-opened' );\n\n\t\t\t\t\t\t\tw.sessionStorage.removeItem( 'dfbmScrollPos' );\n\n\t\t\t\t\t\t}, 300 );\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}, // end animate\n\n\t\t\tvideoRatio : function()\n\t\t\t{\n\n\t\t\t\tvar video  = $( '#dfbm-lightbox' ).find( 'video.wp-video-shortcode, iframe' ),\n\t\t\t\t\tratio  = video.outerWidth() / video.outerHeight(),\n\t\t\t\t\twidth  = $( w ).width() * 0.9,\n\t\t\t\t\theight = $( w ).height() * 0.9,\n\t\t\t\t\tmaxH   = height * ratio > width ? width / ratio : height,\n\t\t\t\t\tmaxW   = maxH * ratio,\n\t\t\t\t\tattr   = { height: maxH, width: maxW },\n\t\t\t\t\tcont   = video.closest( 'div.wp-video' ).css( attr ),\n\t\t\t\t\tholder = cont.closest( 'div.dfbm-lb-slider' ).css( 'width', maxW );\n\n\t\t\t\t( null != w.wp.mediaelement && ! this.opt.content.elem )\n\t\t\t\t? video.css( attr ).mediaelementplayer()\n\t\t\t\t: video.css( attr );\n\n\t\t\t}, // end videoRatio\n\n\t\t\tposition : function( $direction )\n\t\t\t{\n\n\t\t\t\tvar way,\n\t\t\t\t\tnum = this.imgData.show,\n\t\t\t\t\tlen = Object.keys( this.imgData.images ).length;\n\n\t\t\t\tway = ( ~~( 'next' == $direction ) || -1 );\n\n\t\t\t\tnum += way;\n\n\t\t\t\tthis.imgData.show = ( num < 0 ) ? len - 1 : num % len;\n\n\t\t\t\treturn way;\n\n\t\t\t}, // end position\n\n\t\t\tevents : function()\n\t\t\t{\n\n\t\t\t\tvar $this = this;\n\n\t\t\t\t$( document ).on( 'click', '#dfbm-lb-close', function( e )\n\t\t\t\t{\n\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t$this.addAfter.removeClass( 'lightbox' ).scrollTop( $this.top );\n\n\t\t\t\t\t$( w ).scrollTop( $this.top );\n\n\t\t\t\t\t$this.animate( 'out' );\n\n\t\t\t\t\tsetTimeout( function()\n\t\t\t\t\t{\n\n\t\t\t\t\t\t$( document ).off( 'click', 'div.dfbm-lb-switch' );\n\t\t\t\t\t\t$( '#dfbm-lightbox' ).detach();\n\n\t\t\t\t\t}, 600 );\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t});\n\n\t\t\t\t$( document ).on( 'click', 'div.dfbm-lb-switch', function( e )\n\t\t\t\t{\n\n\t\t\t\t\tvar index = $this.position( $(this).data( 'direction' ) );\n\n\t\t\t\t\t$this.addSlide( index );\n\n\t\t\t\t});\n\t\t\t}, // end events\n\t\t}); // end dfbmLightbox\n\n\t\tvar dfbmLbInit = function( $opt )\n\t\t{\n\n\t\t\tthis.init( $opt );\n\n\t\t};\n\n\t\t$.extend( dfbmLbInit.prototype,\n\t\t{\n\n\t\t\tinit : function( $opt )\n\t\t\t{\n\n\t\t\t\tthis.vars();\n\n\t\t\t\tthis.events();\n\n\t\t\t}, // end init\n\n\t\t\tvars : function()\n\t\t\t{\n\n\t\t\t\tthis.url \t= dfbmPhp.url;\n\n\t\t\t\tthis.nonce  = dfbmPhp.nonce;\n\n\t\t\t\tthis.cdn    = dfbmPhpLB.cdn;\n\n\t\t\t\tthis.parent = $( '#dfbm-container' );\n\n\t\t\t\tthis.blog   = this.parent.children( 'div.filterable-blogposts' );\n\n\t\t\t\tthis.grid   = this.parent.hasClass( 'grid' ) ? true : false;\n\n\t\t\t}, // end vars\n\n\t\t\tlightbox : function( $obj )\n\t\t\t{\n\n\t\t\t\tvar item = ( null != $obj.video ) ? $obj : $obj.images[ $obj.show ],\n\t\t\t\t\tlBox = new dfbmLightbox(\n\t\t\t\t\t{\n\n\t\t\t\t\t\tselector : '',\n\t\t\t\t\t\tdata     : $obj,\n\t\t\t\t\t\tcontent  : item,\n\t\t\t\t\t\taddAfter : 'body',\n\t\t\t\t\t\theader   : dfbmPhpLB.header,\n\t\t\t\t\t\tclose    : dfbmPhpLB.close,\n\t\t\t\t\t\twidth    : dfbmPhpLB.width + '%',\n\t\t\t\t\t\tmore     : dfbmPhpLB.more,\n\n\t\t\t\t\t});\n\t\t\t}, // end lightbox\n\n\t\t\tgetdirChildImg : function( $sel, $that )\n\t\t\t{\n\n\t\t\t\tvar images = {}, obj = {};\n\n\t\t\t\t$sel.each( function( i )\n\t\t\t\t{\n\n\t\t\t\t\tvar img, href, src, active;\n\n\t\t\t\t\tif ( ( img = $(this).children( 'img' ) ).length > 0 )\n\t\t\t\t\t{\n\n\t\t\t\t\t\thref   = $(this).prop( 'href' );\n\t\t\t\t\t\tactive = $that == href ? true : false;\n\n\t\t\t\t\t\timages[i] =\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tsrc    : img.prop( 'src' ).replace( /[_-]\\d+x\\d+(?=\\.[a-zA-Z]{3,4}$)/i, '' ),\n\t\t\t\t\t\t\ttitle  : $(this).data( 'title' ),\n\t\t\t\t\t\t\thref   : href,\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif ( active )\n\t\t\t\t\t\t\tobj.show = i;\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tobj.images = images;\n\n\t\t\t\treturn obj;\n\n\t\t\t}, // end getdirChildImg\n\n\t\t\tgetImages : function( $that )\n\t\t\t{\n\n\t\t\t\tvar obj = {}, index = [], $i, divs, iterator, feat, full, length;\n\n\t\t\t\tfeat = this.getdirChildImg( $( '#et_pb_featured_posts').find( 'a.entry-featured-image-url' ), $that );\n\n\t\t\t\tobj.images = feat.images;\n\n\t\t\t\tif ( null != feat.show )\n\t\t\t\t\tobj.show = feat.show;\n\n\t\t\t\tif ( ! this.grid )\n\t\t\t\t{\n\n\t\t\t\t\tfull   = this.getdirChildImg( this.blog.find( 'a.entry-featured-image-url' ), $that );\n\n\t\t\t\t\tlength = Object.keys( obj.images ).length;\n\n\t\t\t\t\tfor ( $i = 0; $i < Object.keys( full.images ).length; $i++ )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tobj.images[ length + $i ] = full.images[$i];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( null != full.show )\n\t\t\t\t\t\tobj.show = full.show + length;\n\n\t\t\t\t}\n\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t\tdivs = this.blog.children( 'div' );\n\n\t\t\t\t\tdivs.each( function( i )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tindex[i] = $(this).find( 'article' ).length;\n\n\t\t\t\t\t});\n\n\t\t\t\t\titerator = Math.max.apply( Math, index );\n\n\t\t\t\t\tfor ( $i = 0; $i < iterator; $i++ )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tfor ( var $j = 0; $j < divs.length; $j++ )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tvar art = $( divs[$j] ).find( 'article' ).eq($i), item = {}, img;\n\n\t\t\t\t\t\t\tif ( ( img = art.find( 'img' ) ).length > 0 )\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tvar link   = art.find( 'a.entry-featured-image-url' ),\n\t\t\t\t\t\t\t\t\thref   = link.prop( 'href' ),\n\t\t\t\t\t\t\t\t\tactive = $that == href ? 1 : 0;\n\n\t\t\t\t\t\t\t\tlength = Object.keys( obj.images ).length;\n\n\t\t\t\t\t\t\t\titem =\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tsrc    : img.prop( 'src' ).replace( /[_-]\\d+x\\d+(?=\\.[a-zA-Z]{3,4}$)/i, '' ),\n\t\t\t\t\t\t\t\t\ttitle  : link.data( 'title' ),\n\t\t\t\t\t\t\t\t\thref   : href,\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tobj.images[length] = item;\n\n\t\t\t\t\t\t\t\tif ( active ) obj.show = length;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.lightbox( obj );\n\n\t\t\t}, // end getImages\n\n\t\t\tgetGallery : function( $article )\n\t\t\t{\n\n\t\t\t\tvar obj    = {}, url,\n\t\t\t\t\tslides = $article.find( 'div.et_pb_slide' ),\n\t\t\t\t\theader = $article.find( '.entry-title a' ),\n\t\t\t\t\thref   = header.prop( 'href' ),\n\t\t\t\t\ttitle  = header.text();\n\n\t\t\t\tobj.images = {};\n\n\t\t\t\tslides.each( function( i )\n\t\t\t\t{\n\n\t\t\t\t\turl = $(this).css('background-image').trim();\n\t\t\t\t\turl = url.replace(/(url\\(|\\)|'|\")/gi, '');\n\n\t\t\t\t\tobj.images[i] =\n\t\t\t\t\t{\n\n\t\t\t\t\t\tsrc    : url,\n\t\t\t\t\t\thref   : href,\n\t\t\t\t\t\ttitle  : title,\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tobj.show = 0;\n\n\t\t\t\tthis.lightbox( obj );\n\n\t\t\t}, // end getGallery\n\n\t\t\tgetVideo : function( $article )\n\t\t\t{\n\n\t\t\t\tvar obj        = {},\n\t\t\t\t\toverlay    = $article.find( 'div.et_pb_video_overlay' ).addClass( 'lightbox' ),\n\t\t\t\t\theader     = $article.find( '.entry-title a' ),\n\t\t\t\t\telement    = $article.find( 'video.wp-video-shortcode a, iframe' );\n\t\t\t\t\tobj.title  = header.text();\n\t\t\t\t\tobj.href   = header.prop( 'href' );\n\t\t\t\t\tobj.elem   = ~~element.is( 'iframe' );\n\t\t\t\t\tobj.link   = obj.elem ? element.prop( 'src' ) : element.prop( 'href' );\n\n\t\t\t\t\tif ( obj.elem )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tvar prop  = element.prop( 'src' ) + \"&autoplay=1\";\n\n\t\t\t\t\t\tobj.video = element.clone( true )\n\t\t\t\t\t\t\t\t\t\t.removeAttr( 'width height style' )\n\t\t\t\t\t\t\t\t\t\t\t.prop( 'src', prop )\n\t\t\t\t\t\t\t\t\t\t\t\t.prop( 'outerHTML' );\n\n\t\t\t\t\t\treturn this.lightbox( obj );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.ajax( obj );\n\n\t\t\t}, // end getVideo\n\n\t\t\tajax : function( $obj )\n\t\t\t{\n\n\t\t\t\tvar $this = this,\n\t\t\t\t\tdata  =\n\t\t\t\t\t{\n\t\t\t\t\t\tnonce   : this.nonce,\n\t\t\t\t\t\taction  : 'dfbm_get_video',\n\t\t\t\t\t\tvidLink : $obj.link,\n\t\t\t\t\t\tcdn     : this.cdn,\n\t\t\t\t\t};\n\n\t\t\t\t$.ajax(\n\t\t\t\t{\n\n\t\t\t\t\ttype     : 'post',\n\t\t\t\t\tdataType : 'json',\n\t\t\t\t\turl      : this.url,\n\t\t\t\t\tdata \t : data,\n\n\t\t\t\t\tsuccess: function( data )\n\t\t\t\t\t{\n\n\t\t\t\t\t\t$obj.video = data;\n\n\t\t\t\t\t\t$this.lightbox( $obj );\n\n\t\t\t\t\t},\n\n\t\t\t\t\terror: function( data )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tlocation.reload();\n\n\t\t\t        }\n\t\t\t\t});\n\t\t\t}, // end ajax\n\n\t\t\tevents : function()\n\t\t\t{\n\n\t\t\t\tvar $this = this;\n\n\t\t\t\tthis.parent\n\t\t\t\t\t.on( 'mousedown', 'a.entry-featured-image-url', function( e )\n\t\t\t\t\t{\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t$this.getImages( $(this).prop( 'href' ) );\n\n\t\t\t\t\t})\n\t\t\t\t\t.on( 'mousedown', 'div.et_pb_slider', function( e )\n\t\t\t\t\t{\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t$this.getGallery( $(this).closest( 'div.article-inner' ) );\n\n\t\t\t\t\t})\n\t\t\t\t\t.on( 'mousedown', 'div.et_main_video_container', function( e )\n\t\t\t\t\t{\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t$(this).find( '.et_pb_video_overlay' ).off();\n\n\t\t\t\t\t\t$this.getVideo( $(this).parent( 'div.article-inner' ) );\n\n\t\t\t\t\t});\n\t\t\t}, // end events\n\t\t}); // end dfbmLbInit\n\n\t\tnew dfbmLbInit({});\n\n\t});\n}(jQuery,window));\n"]}