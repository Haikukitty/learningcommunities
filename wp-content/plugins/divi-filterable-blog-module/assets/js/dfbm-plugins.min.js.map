{"version":3,"sources":["dfbm-plugins.js"],"names":["$","dfbmUpdater","_classCallCheck","this","setProperties","bindEvents","_createClass","key","value","red","green","localize","dfbmPHP","resp","color","message","field","css","attr","ajax","action","self","that","arguments","length","undefined","data","nonce","license","type","dataType","url","success","prefix","apply","setTimeout","closest","slideUp","remove","location","reload","failed","alert","delete","error","on","e","preventDefault","stopImmediatePropagation","val","valid","jQuery"],"mappings":"8XAAC,SAASA,GAAGA,EAAE,WAsJd,IAtJwB,WAcpB,QAAAC,KACAC,gBAAAC,KAAAF,GAEIE,KAAKC,gBAELD,KAAKE,aAnBW,MAAAC,cAAAL,IAAAM,IAAA,gBAAAC,MAAA,QAAAJ,KAQtBD,KAAKM,IAAM,UACXN,KAAKO,MAAQ,UACbP,KAAKQ,SAAWC,YAVMN,aAAAL,IAAAM,IAAA,OAAAC,MAAA,QAAAK,GAuBjBC,EAAOC,GAGZ,MAAOZ,MAAKa,MACRC,IAAK,aAAcH,GACnBI,KAAM,QAAS,IACfA,KAAM,cAAeH,MA7BHR,IAAA,OAAAC,MAAA,QAAAW,GAiCjBC,EAAQb,EAAKc,GACnB,GADyBC,GACzBC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,GADgCpB,KAG3BuB,GAGHC,MAAUN,EAAKV,SAASgB,MACxBP,OAAUA,EACVQ,QAAUrB,EAIXmB,GAAKN,IAAU,EAEfpB,EAAEmB,MAGDO,KAASA,EACTG,KAAW,OACXC,SAAW,OACXC,IAAWV,EAAKV,SAASoB,IAEzBC,QAAS,QAAAA,GAAUN,GAGbL,EAAKV,SAASsB,OAAS,aAAeb,EAGrC,WAAaM,IAGjBL,EAAKR,KAAKqB,MAAOZ,GAAQD,EAAKX,MAAOgB,EAAKM,UAE1CG,WAAY,WAGXnC,EAAEsB,GAAMc,QAAS,sBAAuBC,QAAS,IAAK,WAGrDrC,EAAEG,MAAMiC,QAAS,MAAOE,SAExBC,SAASC,YAGR,MAIHnB,EAAKR,KAAKqB,MAAOZ,GAAQD,EAAKZ,IAAKiB,EAAKe,SAOpC,UAAYf,IAGhBgB,MAAOhB,EAAKiB,QAEZJ,SAASC,UAKTE,MAAOhB,EAAKe,SAKfG,MAAO,QAAAA,GAAUlB,GAGhBgB,MAAOrB,EAAKV,SAASiC,OAErBL,SAASC,eA5GWjC,IAAA,aAAAC,MAAA,QAAAH,KAmHpB,GADYgB,GACZE,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,GADmBpB,IAGrBH,GAAG,IAAMqB,EAAKV,SAASsB,OAAS,mBAAoBY,GAAI,QAAS,SAAUC,GAG1EA,EAAEC,iBACFD,EAAEE,2BAEF7C,KAAKa,MAAQhB,EAAG,IAAMqB,EAAKV,SAASsB,OAAS,kBAC7C9B,KAAK8C,IAAQ9C,KAAKa,MAAMiC,MAEnB9C,KAAK8C,KAAO,IAAM9C,KAAK8C,IAAIzB,OAG/BH,EAAKF,KAAKe,MAAO/B,MAAQkB,EAAKV,SAASsB,OAAS,YAAa9B,KAAK8C,IAAK5B,IAKvEA,EAAKR,KAAKqB,MAAO/B,MAAQkB,EAAKZ,IAAKY,EAAKV,SAASuC,MAAO7B,MAI1DrB,EAAG,IAAMqB,EAAKV,SAASsB,OAAS,mBAAoBY,GAAI,QAAS,SAAUC,GAG1EA,EAAEC,iBAEF1B,EAAKF,KAAKe,MAAO/B,MAAQkB,EAAKV,SAASsB,OAAS,cAAeZ,EAAKV,SAASJ,IAAKc,UA/I7DpB,SAwJpBkD","file":"dfbm-plugins.min.js","sourcesContent":["(function($){$(function(){\n\n\tclass dfbmUpdater\n\t{\n\n\t\tsetProperties()\n\t\t{\n\n\t\t\tthis.red = '#fff0f0';\n\t\t\tthis.green = '#f1fff0';\n\t\t\tthis.localize = dfbmPHP;\n\n\t\t} // end setProperties\n\n\t    constructor()\n\t    {\n\n\t        this.setProperties();\n\n\t        this.bindEvents();\n\n\t    } // end constructor\n\n\t\tresp( color, message )\n\t\t{\n\n\t\t\treturn this.field\n\t\t\t\t\t\t.css( 'background', color )\n\t\t\t\t\t\t.attr( 'value', '' )\n\t\t\t\t\t\t.attr( 'placeholder', message );\n\n\t\t}\n\n\t\tajax( action, key, self, that = this )\n\t\t{\n\n\t\t\tlet data =\n\t\t\t{\n\n\t\t\t\tnonce   : self.localize.nonce,\n\t\t\t\taction  : action,\n\t\t\t\tlicense : key,\n\n\t\t\t}\n\n\t\t\tdata[action] = true;\n\n\t\t\t$.ajax(\n\t\t\t{\n\n\t\t\t\tdata \t : data,\n\t\t\t\ttype     : 'post',\n\t\t\t\tdataType : 'json',\n\t\t\t\turl      : self.localize.url,\n\n\t\t\t\tsuccess: function( data )\n\t\t\t\t{\n\n\t\t\t\t\tif ( self.localize.prefix + '_activate' == action )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif ( 'success' in data )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tself.resp.apply( that, [ self.green, data.success ] );\n\n\t\t\t\t\t\t\tsetTimeout( () =>\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t$(that).closest( 'div.update-message' ).slideUp( 800, function()\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\t$(this).closest( 'tr' ).remove();\n\n\t\t\t\t\t\t\t\t\tlocation.reload();\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, 3000 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tself.resp.apply( that, [ self.red, data.failed ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t\tif ( 'delete' in data )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\talert( data.delete );\n\n\t\t\t\t\t\t\tlocation.reload();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\talert( data.failed );\n\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\terror: function( data )\n\t\t\t\t{\n\n\t\t\t\t\talert( self.localize.error );\n\n\t\t\t\t\tlocation.reload();\n\n\t\t        }\n\t\t\t});\n\t\t} // end ajax\n\n\t    bindEvents( self = this )\n\t    {\n\n\t\t\t$( '#' + self.localize.prefix + '-license-submit' ).on( 'click', function( e )\n\t\t\t{\n\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\tthis.field = $( '#' + self.localize.prefix + '-license-field' );\n\t\t\t\tthis.val   = this.field.val();\n\n\t\t\t\tif ( this.val && 32 == this.val.length )\n\t\t\t\t{\n\n\t\t\t\t\tself.ajax.apply( this, [ self.localize.prefix + '_activate', this.val, self ] );\n\n\t\t\t\t}\n\n\t\t\t\telse\n\t\t\t\t\tself.resp.apply( this, [ self.red, self.localize.valid, self ] );\n\n\t\t\t});\n\n\t\t\t$( '#' + self.localize.prefix + '-remove-license' ).on( 'click', function( e )\n\t\t\t{\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tself.ajax.apply( this, [ self.localize.prefix + '_deactivate', self.localize.key, self ] );\n\n\t\t\t});\n\n\t    } // end bindEvents\n\t} // end class dfbmUpdater\n\n\tnew dfbmUpdater;\n\n});}(jQuery));\n"]}