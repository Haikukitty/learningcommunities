"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function($){$(function(){var e=function e(t){this.init(t)};$.extend(e.prototype,_defineProperty({init:function e(t){this.vars(t),this.load()},vars:function e(t){this.opt=$.extend({},{prefix:"et_pb_templates_",prfix:"",newVers:"",error:"",slugs:""},t),this.prfix=new RegExp(this.opt.prfix),this.newVers=parseInt(this.opt.newVers)},load:function e(){var t=this,n=setInterval(function(){"string"==typeof localStorage.et_pb_templates_settings_product_version&&(clearInterval(n),setTimeout(function(){t.newVers?t.rebuild(!1):t.check()},1e3))},300)},check:function e(){if(this.local()){var t,n,r=[];for(t in localStorage)-1!==t.indexOf(this.prfix)&&r.push(t);r.length!=this.opt.slugs.length&&this.rebuild(!0,r)}},local:function e(){return"localStorage"in window&&null!==window.localStorage},rebuild:function e(t,n){var r=this,n=n||!1,o="et_pb_templates_";if(t||this.clear(),n)var i=this.opt.slugs.filter(function(e){return n.indexOf(o+e)<0});else i=this.opt.slugs;$.ajax({type:"post",dataType:"json",url:et_pb_options.ajaxurl,data:{action:"et_pb_get_backbone_template",et_post_type:et_pb_options.post_type,et_admin_load_nonce:et_pb_options.et_admin_load_nonce,et_modules_slugs:JSON.stringify({missing_modules_array:i})},success:function e(t){void 0!==t.templates&&t.templates.length>0&&$.each(t.templates,function(e,n){var i=r.template(n.template,t.unique);if(r.local())try{localStorage.setItem(o+n.slug,LZString.compressToUTF16(i))}catch(e){}$("#et-builder-"+n.slug+"-module-template").remove(),$("body").append(i)})},error:function e(t){console.log(t)}})},template:function e(t,n){if(void 0===n)return t;var r=/<!-- (\d+) -->/g;return t.replace(r,function(e,t){return n[t]})},clear:function e(){for(var t in localStorage)-1!==t.indexOf(this.prfix)&&localStorage.removeItem(t)},error:function e(){this.clear(),alert(this.opt.error)}},"local",function e(){return"localStorage"in window&&null!==window.localStorage})),new e({prfix:dfbmPHP.prfix,newVers:dfbmPHP.new,error:dfbmPHP.error,slugs:dfbmPHP.slugs})})}(jQuery);
//# sourceMappingURL=./dfbm-admin.min.js.map