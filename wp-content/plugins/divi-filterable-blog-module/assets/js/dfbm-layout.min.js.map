{"version":3,"sources":["dfbm-layout.js"],"names":["$","document","on","title","children","val","indexOf","this","parent","hasClass","int","setInterval","settings","length","data","clearInterval","find","hide","closest","siblings","query","catID","$sel","arr","each","prop","push","opt","filter","posts_number","offset_number","posts_featured","custom_posttypes","include_product_categories","toString","exclude_product_categories","include_product_tags","exclude_product_tags","show_order_options","order_options_order","order_options_orderby","ajax","type","dataType","url","et_pb_options","ajaxurl","action","nonce","dfbmPHP","postID","id","success","$data","error","r","alert","noSave","jQuery"],"mappings":"cAAC,SAASA,GACTA,EAAE,WAGDA,EAAGC,UACDC,GAAI,YAAa,8CAA+C,WAGhE,GAAIC,GAAQH,EAAG,cAAeI,SAAU,UAAWC,KAEnD,KAAQ,IAAMF,EAAMG,QAAS,WAAiBN,EAAEO,MAAMC,SAASC,SAAU,uBAA0BT,EAAEO,MAAMC,SAASC,SAAU,sBAG7H,GAAIC,GAAMC,YAAa,WAGtB,GAAIC,GAAWZ,EAAG,qCAElB,IAAKY,EAASC,OAAS,GAAK,mBAAqBD,EAASE,KAAM,aAChE,CAECC,cAAeL,IAOT,IALOE,EACRR,SAAU,6BACVA,SAAU,6BACVU,KAAM,eAEQR,QAAS,sBAGrB,IAAMH,EAAMG,QAAS,cAG1BM,EAASI,KAAM,2FACbR,SAASA,SAASS,OAEpBL,EAASI,KAAM,+BAA+BE,QAAS,oBAAqBD,QAIxEL,EAASI,KAAM,6BAA6BE,QAAS,oBAAqBD,UAI/E,OAGJf,GAAI,YAAa,4BAA6B,WAG9C,GAAIC,GAAWH,EAAG,cAAeI,SAAU,UAAWC,MACrDO,EAAWZ,EAAEO,MAAMC,SAASW,SAAU,4BAEvC,KAAQ,IAAMhB,EAAMG,QAAS,WAAkB,IAAMM,EAASE,KAAM,eAAgBR,QAAS,mBAC7F,CAEC,GAAIc,GACHC,EAAQ,QAARA,GAAkBC,GAGjB,GAAIC,KAUJ,OARAD,GAAKN,KAAM,0BAA2BQ,KAAM,WAGtCxB,EAAEO,MAAMkB,KAAK,YACjBF,EAAIG,KAAM1B,EAAEO,MAAMF,SAIbkB,GAGRI,EAAO,QAAPA,GAAiBL,GAGhB,MAAOA,GAAKM,OAAQ,WAGnB,GAAK5B,EAAEO,MAAMkB,KAAM,YAClB,OAAO,IAENpB,MAGLe,IAGCS,aAAiBjB,EAASI,KAAM,uBAAwBX,MACxDyB,cAAiBlB,EAASI,KAAM,wBAAyBX,MACzD0B,eAAiBnB,EAASI,KAAM,yBAA0BX,OAItD,aAAeF,GAGnBiB,EAAMY,iBAAmB,UAEzBZ,EAAMa,2BAA6BZ,EAAOT,EAASI,KAAM,sCAAwCkB,WACjGd,EAAMe,2BAA6Bd,EAAOT,EAASI,KAAM,sCAAwCkB,WAEjGd,EAAMgB,qBAAuBf,EAAOT,EAASI,KAAM,gCAAkCkB,WACrFd,EAAMiB,qBAAuBhB,EAAOT,EAASI,KAAM,gCAAkCkB,aAOrFd,EAAMkB,mBAAwBX,EAAKf,EAASI,KAAM,6BAA8BZ,SAAU,WAC1FgB,EAAMmB,oBAAwBZ,EAAKf,EAASI,KAAM,8BAA+BZ,SAAU,WAC3FgB,EAAMoB,sBAAwBb,EAAKf,EAASI,KAAM,gCAAiCZ,SAAU,YAI9FJ,EAAEyC,MAGDC,KAAW,OACXC,SAAW,OACXC,IAAWC,cAAcC,QACzBhC,MAGCiC,OAAU,yBACVC,MAAUC,QAAQD,MAClBE,OAAUD,QAAQE,GAClB/B,MAAUA,GAGXgC,QAAS,QAAAA,GAAUC,KAOnBC,MAAO,QAAAA,GAAUC,GAGhBC,MAAOP,QAAQQ,iBASpBC","file":"dfbm-layout.min.js","sourcesContent":["(function($){\n\t$(function(){\n\t\"use strict\";\n\n\t\t$( document )\n\t\t\t.on( 'mousedown', 'a.et-pb-settings, ul.et-pb-all-modules > li', function()\n\t\t\t{\n\n\t\t\t\tvar title = $( '#titlewrap' ).children( '#title' ).val();\n\n\t\t\t\tif ( ( -1 !== title.indexOf( 'DFBM-' ) ) && ( $(this).parent().hasClass( 'et_pb_module_block' ) || $(this).parent().hasClass( 'et-pb-all-modules' ) ) )\n\t\t\t\t{\n\n\t\t\t\t\tvar int = setInterval( function()\n\t\t\t\t\t{\n\n\t\t\t\t\t\tvar settings = $( 'div.et_pb_modal_settings_container' );\n\n\t\t\t\t\t\tif ( settings.length > 0 && 'module_settings' == settings.data( 'open_view' ) )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tclearInterval( int );\n\n\t\t\t\t\t\t\tvar module = settings\n\t\t\t\t\t\t\t\t\t\t\t.children( 'div.et-pb-modal-container' )\n\t\t\t\t\t\t\t\t\t\t\t.children( 'div.et_pb_module_settings' )\n\t\t\t\t\t\t\t\t\t\t\t.data( 'module_type' );\n\n\t\t\t\t\t\t\tif ( -1 !== module.indexOf( 'et_pb_dfbm_blog' ) )\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif ( -1 === title.indexOf( 'DFBM-Shop' ) )\n\t\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\t\tsettings.find( '#et_pb_custom_posttypes, #et_pb_include_post_categories, #et_pb_exclude_post_categories')\n\t\t\t\t\t\t\t\t\t\t.parent().parent().hide();\n\n\t\t\t\t\t\t\t\t\tsettings.find( '#et_pb_show_category_filter').closest( 'div.et-pb-option' ).hide();\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\telse settings.find( '#et_pb_show_order_options').closest( 'div.et-pb-option' ).hide();\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on( 'mousedown', 'a.et-pb-modal-save.button', function()\n\t\t\t{\n\n\t\t\t\tvar title    = $( '#titlewrap' ).children( '#title' ).val(),\n\t\t\t\t\tsettings = $(this).parent().siblings( 'div.et_pb_module_settings' );\n\n\t\t\t\tif ( ( -1 !== title.indexOf( 'DFBM-' ) ) && ( -1 !== settings.data( 'module_type' ).indexOf( 'et_pb_dfbm_blog' ) ) )\n\t\t\t\t{\n\n\t\t\t\t\tvar query,\n\t\t\t\t\t\tcatID = function( $sel )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\tvar arr = [];\n\n\t\t\t\t\t\t\t$sel.find( 'input[type=\"checkbox\"]' ).each( function()\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif ( $(this).prop('checked') )\n\t\t\t\t\t\t\t\t\tarr.push( $(this).val() );\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn arr;\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\topt  = function( $sel )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\treturn $sel.filter( function()\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif ( $(this).prop( 'selected' ) )\n\t\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t}).val();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tquery =\n\t\t\t\t\t{\n\n\t\t\t\t\t\tposts_number   : settings.find( '#et_pb_posts_number' ).val(),\n\t\t\t\t\t\toffset_number  : settings.find( '#et_pb_offset_number' ).val(),\n\t\t\t\t\t\tposts_featured : settings.find( '#et_pb_posts_featured' ).val(),\n\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( 'DFBM-Shop' == title )\n\t\t\t\t\t{\n\n\t\t\t\t\t\tquery.custom_posttypes = 'product';\n\n\t\t\t\t\t\tquery.include_product_categories = catID( settings.find( '#et_pb_include_product_categories' ) ).toString();\n\t\t\t\t\t\tquery.exclude_product_categories = catID( settings.find( '#et_pb_exclude_product_categories' ) ).toString();\n\n\t\t\t\t\t\tquery.include_product_tags = catID( settings.find( '#et_pb_include_product_tags' ) ).toString();\n\t\t\t\t\t\tquery.exclude_product_tags = catID( settings.find( '#et_pb_exclude_product_tags' ) ).toString();\n\n\t\t\t\t\t}\n\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t\tquery.show_order_options    = opt( settings.find( '#et_pb_show_order_options' ).children( 'option' ) );\n\t\t\t\t\t\tquery.order_options_order   = opt( settings.find( '#et_pb_order_options_order' ).children( 'option' ) );\n\t\t\t\t\t\tquery.order_options_orderby = opt( settings.find( '#et_pb_order_options_orderby' ).children( 'option' ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t$.ajax(\n\t\t\t\t\t{\n\n\t\t\t\t\t\ttype     : 'post',\n\t\t\t\t\t\tdataType : 'json',\n\t\t\t\t\t\turl      : et_pb_options.ajaxurl,\n\t\t\t\t\t\tdata:\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\taction  : 'dfbm_set_archive_query',\n\t\t\t\t\t\t\tnonce   : dfbmPHP.nonce,\n\t\t\t\t\t\t\tpostID  : dfbmPHP.id,\n\t\t\t\t\t\t\tquery   : query,\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function( $data )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t// ...\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\terror: function( r )\n\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\talert( dfbmPHP.noSave );\n\n\t\t\t\t        }\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\t});\n}(jQuery));\n"]}